# FactGuardian 项目分工总结

## 成员分工概览

| 成员         | 学号        | 主要职责                                     | 核心交付物                                                   |
| ------------ | ----------- | -------------------------------------------- | ------------------------------------------------------------ |
| **詹江叶煜** | 10235501471 | 内部冲突监测功能的实现与前端用户体验优化     | `conflict_detector.py`, 历史记录与高亮跳转功能               |
| **马舒童**   | 10235501462 | 冲突检测全流程完善与性能优化、前端搭建 | `verifier.py`, `lsh_filter.py`, 前端组件                     |
| **张欣扬**   | 10235501413 | 扩展功能的实现与多文档前端优化               | `reference_comparator.py`, `image_extractor.py`, `image_text_comparator.py` |

---

## 详细分工

### 詹江叶煜 - 冲突监测功能实现与前端用户体验优化

**核心任务：**

1. 实现冲突检测核心算法（`ConflictDetector` 类）
2. 设计冲突检测 Prompt 模板
3. 实现智能事实对生成（结构化字段驱动）
4. 实现冲突检测 API 端点
5. 实现历史记录功能
6. 实现高亮跳转功能
7. 优化前端用户体验（交互流畅性、功能完善度）

**技术栈：** Python, FastAPI, React, JavaScript, DeepSeek API, Tailwind CSS

**关键文件：**

- `backend/app/services/conflict_detector.py` (734行)
- `backend/app/main.py` (冲突检测相关端点)
- 前端历史记录与高亮跳转相关组件

**验收标准：**

- 能够检测数据不一致、逻辑矛盾、时间冲突
- 历史记录功能完善，支持查看和管理
- 冲突高亮跳转准确定位
- JSON 解析容错完善

---

### 马舒童 - 冲突检测全流程完善与性能优化及前端搭建

**核心任务：**

**1. 后端核心功能实现：**

- 实现溯源联网检测服务（`Verifier` 类）
- 实现重复内容提取（LSH 局部敏感哈希）
- 实现全流程性能优化（事实提取/溯源联网检测/内部冲突检测/核心重复内容提取）
- 实现批量并行处理优化（`batch_size=10`）
- 优化进度更新频率和实时推送
- 实现溯源检测 API 端点

**2. 前端基础搭建：**

- 实现单文档模式前端完整架构
- 实现冲突列表组件（`ConflictList.jsx`）
- 实现文档查看器（`DocumentViewer.jsx`）
- 实现重复内容展示（`RepetitionList.jsx`）
- 实现进度显示（`FunLoading.jsx`）
- 搭建图文对比与多文档对比前端基础

**技术栈：** Python, FastAPI, asyncio, React, JavaScript, Tailwind CSS, SSE

**关键文件：**

- `backend/app/services/verifier.py`
- `backend/app/services/lsh_filter.py`
- `backend/app/main.py` (溯源检测相关端点)
- `frontend/src/components/ConflictList.jsx`
- `frontend/src/components/DocumentViewer.jsx`
- `frontend/src/components/RepetitionList.jsx`
- `frontend/src/components/FunLoading.jsx`

**验收标准：**

- 溯源检测能够识别未引用的外部来源
- 能够识别高频重复段落（3次以上）
- 进度显示实时更新
- 单文档前端功能完整，用户体验流畅
- 响应式设计，支持不同屏幕

---

### 张欣扬 - 扩展功能实现与多文档前端优化

**核心任务：**

**1. 参考文档对比功能：**

- 实现多文件上传 API (`/api/upload-multiple`)
- 实现参考对比服务 (`ReferenceComparator`)
- 实现参考对比 API (`/api/compare-references`)
- 实现相似度计算（0-100%）
- 实现相似类型识别（直接引用/改写/思想借鉴）

**2. 图片/框架图对比功能：**

- 实现图片提取服务 (`ImageExtractor`)
- 集成多 Vision API（Claude / GPT-4V / 豆包）
- 实现图片提取 API (`/api/extract-from-image`)
- 实现图文对比服务 (`ImageTextComparator`)
- 实现图文对比 API (`/api/compare-image-text`)

**3. 多文档前端优化：**

- 优化图文对比前端组件（`ImageTextComparison.jsx`）
- 优化多文档对比前端组件（`MultiDocComparison.jsx`）
- 完善交互逻辑和用户体验

**技术栈：** Python, FastAPI, Vision API (Claude/GPT-4V/豆包), React

**关键文件：**

- `backend/app/services/reference_comparator.py` (229行)
- `backend/app/services/image_extractor.py` (405行)
- `backend/app/services/image_text_comparator.py` (223行)
- `frontend/src/components/MultiDocComparison.jsx`
- `frontend/src/components/ImageTextComparison.jsx`

**验收标准：**

- 能够检测明显的改写段落
- 相似度判断基本准确
- 能够识别架构图、流程图等
- 能够判断文档与图片的一致性
- 支持多种 Vision API
- 多文档前端交互流畅，功能完善

---

## API 端点汇总

### 冲突检测（詹江叶煜/马舒童）

- `POST /api/detect-conflicts/{document_id}` - 触发冲突检测
- `GET /api/conflicts/{document_id}` - 获取冲突结果
- `POST /api/verify-sources/{document_id}` - 触发溯源检测
- `GET /api/verification-results/{document_id}` - 获取溯源结果
- `POST /api/extract-repetitions/{document_id}` - 触发重复内容提取
- `GET /api/repetitions/{document_id}` - 获取重复内容结果


### 扩展功能（张欣扬）

- `POST /api/upload-multiple` - 多文件上传
- `POST /api/compare-references` - 参考文档对比
- `POST /api/extract-from-image` - 图片内容提取
- `POST /api/compare-image-text` - 图文对比

---

## 协作接口

### 数据格式

- **冲突数据**：`conflict_id`, `has_conflict`, `conflict_type`, `severity`, `explanation`
- **溯源数据**：`claim_id`, `is_verified`, `sources[]`, `credibility_score`
- **重复内容**：`repetition_id`, `content`, `frequency`, `locations[]`
- **参考对比**：`similarities[]`, `similarity_score`, `similarity_type`, `needs_citation`
- **图文对比**：`is_consistent`, `consistency_score`, `missing_elements[]`, `contradictions[]`

### 进度推送

- 使用 SSE (`/api/progress/{document_id}`) 实现实时进度更新
- 前端通过 `EventSource` 订阅进度事件
